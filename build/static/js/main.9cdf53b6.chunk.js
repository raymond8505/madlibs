(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(25)},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setWords",function(){return u}),n.d(a,"setSentence",function(){return h}),n.d(a,"WORD_ACTIONS",function(){return d}),n.d(a,"SENTENCE_ACTIONS",function(){return m});var r=n(0),l=n.n(r),o=n(2),c=n.n(o),s=n(5),i=n(1);function u(e){return{type:d.SET,words:e}}function h(e){return{type:m.SET,sentence:e}}var d={SET:"SET_WORDS"},m={SET:"SET_SENTENCE"};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.SET:e=t.words}return e};var v=Object(i.b)({words:p,sentence:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SET:e=t.sentence}return e}}),f=Object(i.c)(v,{words:{},sentence:"The {adjective} {noun} {verb} the {adjective} {noun}"}),E=n(3),g=n(4),S=n(7),w=n(6),b=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).state={},a}return Object(g.a)(n,[{key:"render",value:function(){return l.a.createElement("dl",{className:"WordList"},l.a.createElement("dt",{className:"WordList__label"},this.props.label),l.a.createElement("dd",null,l.a.createElement("ul",null,this.props.words.map(function(e,t){return l.a.createElement("li",{key:t},e)}))))}}]),n}(l.a.Component);b.defaultProps={};var y=b,k=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).urlField=l.a.createRef(),a.sentenceInput=l.a.createRef(),a.shareField=l.a.createRef(),a.defaultWordsURL="https://docs.google.com/spreadsheets/d/1lyGAciRMlbfIJSA4FHXTKlPfWrL3BMipitoNxnPU164/edit?usp=sharing",a.getSheetCode=function(e){var t=e.match(/d\/([^/]+)\//i);if(null!==t&&t.length>1)return t[1];throw new Error(e+" is not a valid google sheets url")},a.parseWords=function(e,t){console.log(e);var n={},r=e.table,l=[];r.rows.forEach(function(e,t){e.c.forEach(function(e,a){if(0===t)l.push(e.v);else{var r=l[a];void 0===n[r]&&(n[r]=[]),null!==e&&null!==e.v&&""!==e.v.trim()&&n[r].push(e.v)}})}),a.props.setWords(n),a.setState({parsingSheet:!1}),t&&t()},a.makeSheetJSONURL=function(e){return"https://docs.google.com/spreadsheets/d/"+e+"/gviz/tq?gid=0"},a.handleGenerateSentence=function(e){e.persist();var t=a.sentenceInput.current.value;t=a.replaceWords(t),a.props.setSentence(t)},a.replaceWords=function(e){return a.findVariables(e)},a.findVariables=function(e){return e.match(/\{[^}]+\}/gi).forEach(function(t){var n=a.pickWord(t);e=e.replace(t,n),console.log(t,n)}),e},a.pickWord=function(e){var t=e.replace(/[\{,\}]/g,""),n=f.getState().words;if(n!={}){var a=n[t];if(a&&a.length>0)return a[Math.round(Math.random()*(a.length-1))]}return e},a.makeShareURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return window.location.origin+"?sheet="+encodeURIComponent(e)+"&sentence="+encodeURIComponent(t)},a.getSentenceFromURL=function(){var e=window.location.search.match(/sentence=([^&]+)/);return null!==e&&e.length>1?decodeURIComponent(e[1]):null},a.getSheetFromURL=function(){var e=window.location.search.match(/sheet=([^&]+)/);return null!==e&&e.length>1?decodeURIComponent(e[1]):null},a.handleGetWordsClick=function(e){var t=a.getSheetCode(a.urlField.current.value),n=a.makeSheetJSONURL(t);a.setState({parsingSheet:!0}),a.fetchSheet(n)},a.outputWordLists=function(){var e=f.getState().words;return Object.keys(e).map(function(t){var n=e[t];return l.a.createElement(y,{key:t,label:t,words:n})})},a.handleSentenceKeyUp=function(e){a.shareField.current.value=a.makeShareURL(a.urlField.current.value,a.sentenceInput.current.value)},a.state={parsingSheet:!1},a}return Object(g.a)(n,[{key:"fetchSheet",value:function(e,t){var n=this;fetch(e).then(function(e){Promise.resolve(e);e.text().then(function(e){var a=e.match(/google\.visualization\.Query\.setResponse\((.+)\)/);null!==a&&a.length>1&&n.parseWords(JSON.parse(a[1]),t)})})}},{key:"componentDidMount",value:function(){var e=this.getSheetFromURL()||this.defaultWordsURL,t=this.getSentenceFromURL()||f.getState().sentence;this.sentenceInput.current.value=t,this.urlField.current.value=e,this.shareField.current.value=this.makeShareURL(e,t),this.handleGetWordsClick()}},{key:"render",value:function(){return l.a.createElement("div",{className:"Main"},l.a.createElement("h1",null,"Mad Libs"),l.a.createElement("div",{className:"Main__share-shell"},l.a.createElement("label",null,"Share URL:"),l.a.createElement("input",{className:"Main__share-field",readOnly:!0,ref:this.shareField})),l.a.createElement("div",{className:"Main__field-shell"},l.a.createElement("input",{className:"Main__url-field",type:"text",ref:this.urlField,placeholder:"Google Sheet URL"}),l.a.createElement("button",{type:"button",className:"Main__get-words-btn",onClick:this.handleGetWordsClick,disabled:this.state.parsingSheet},"Get Words")),l.a.createElement("h2",null,"Sentence Output"),l.a.createElement("textarea",{className:"Main__sentence-input",placeholder:"The {adjective} {noun} {verb} the {adjective} {noun}",ref:this.sentenceInput,onKeyUp:this.handleSentenceKeyUp}),l.a.createElement("button",{className:"Main__generate-sentence",onClick:this.handleGenerateSentence},"Generate Sentence"),l.a.createElement("div",{className:"Main__sentence"},f.getState().sentence),l.a.createElement("h2",null,"Words"),l.a.createElement("div",{className:"Main__words"},this.outputWordLists()),l.a.createElement("div",{className:"Main__instructions"},l.a.createElement("h2",null,"Instructions"),l.a.createElement("ol",null,l.a.createElement("li",null,"Create a Google Sheet"),l.a.createElement("li",null,"Add as many columns as you want with the first row being the labels you'll use in your sentence (noun,verb,adjective,etc)"),l.a.createElement("li",null,"Add as many words to each column as you want"),l.a.createElement("li",null,"Set the sharing permissions on the sheet that everyone with a link can edit"),l.a.createElement("li",null,"Paste the sheet's link into the ",l.a.createElement("em",null,"Google Sheet URL")," field and click ",l.a.createElement("em",null,"Get Words")),l.a.createElement("li",null,"If you did everything right, the word list will populate"),l.a.createElement("li",null,"Under ",l.a.createElement("em",null,"Sentence Output")," write your sentence, marking words you want to randomize from their list with curly braces ",l.a.createElement("strong",null,"{}"),", ex: ","The {adjective} {noun} jumps over the {adjective} {noun}"),l.a.createElement("li",null,"Click ",l.a.createElement("em",null,"Generate Sentence")," to generate a sentence with random new words")),l.a.createElement("h3",null,"Troubleshooting"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Nothing's happening"),l.a.createElement("br",null),"You probably forgot to hit ",l.a.createElement("strong",null,"get words")," or there's an issue with your Google Sheet"),l.a.createElement("li",null,l.a.createElement("strong",null,"One or more words aren't replacing"),l.a.createElement("br",null),"Check your spelling in the sentence as well as in the sheet ex: ","{","noun",l.a.createElement("strong",null,"s"),"}"," in the sentence, but noun in the sheet"))))}}]),n}(l.a.Component);n(24);var _=Object(s.b)(function(e){return{words:e.words,sentence:e.sentence}},function(e){return Object(i.a)(a,e)})(k),R=document.getElementById("root");c.a.render(l.a.createElement(s.a,{store:f},l.a.createElement(l.a.StrictMode,null,l.a.createElement(_,null))),R)}},[[13,1,2]]]);
//# sourceMappingURL=main.9cdf53b6.chunk.js.map